{
  "info": {
    "name": "RoleController API - Business",
    "description": "Collection para testes da API de Roles da Business API",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "version": "1.0.0"
  },
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8089/api/business",
      "type": "string"
    },
    {
      "key": "jwt_token",
      "value": "{{jwt_token}}",
      "type": "string"
    },
    {
      "key": "role_id",
      "value": "550e8400-e29b-41d4-a716-446655440002",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Roles CRUD",
      "item": [
        {
          "name": "POST Create Role",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"MANAGER\",\n  \"description\": \"Gerente com acesso a relatórios e usuários\",\n  \"permissionIds\": [\n    \"550e8400-e29b-41d4-a716-446655440000\",\n    \"550e8400-e29b-41d4-a716-446655440001\"\n  ]\n}"
            },
            "url": {
              "raw": "{{base_url}}/roles/create",
              "host": ["{{base_url}}"],
              "path": ["roles", "create"]
            },
            "description": "Cria uma nova role no sistema. Requer autenticação JWT e permissão role:create."
          },
          "response": [
            {
              "name": "Success - Role criada",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"MANAGER\",\n  \"description\": \"Gerente com acesso a relatórios e usuários\",\n  \"permissionIds\": [\n    \"550e8400-e29b-41d4-a716-446655440000\",\n    \"550e8400-e29b-41d4-a716-446655440001\"\n  ]\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/create",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "create"]
                }
              },
              "status": "Created",
              "code": 201,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440002\",\n  \"name\": \"MANAGER\",\n  \"description\": \"Gerente com acesso a relatórios e usuários\",\n  \"active\": true,\n  \"createdAt\": \"2024-01-15T10:30:00\",\n  \"updatedAt\": \"2024-01-15T10:30:00\",\n  \"permissionNames\": [\"user:read\", \"user:write\"]\n}"
            },
            {
              "name": "Error - Nome inválido",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"manager\",\n  \"description\": \"Gerente com acesso a relatórios e usuários\",\n  \"permissionIds\": [\"550e8400-e29b-41d4-a716-446655440000\"]\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/create",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "create"]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [],
              "cookie": [],
              "body": "{\n  \"error\": \"Validation failed\",\n  \"message\": \"Nome da role deve conter apenas letras maiúsculas e underscore\"\n}"
            },
            {
              "name": "Error - Nome duplicado",
              "originalRequest": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"ADMIN\",\n  \"description\": \"Administrador do sistema\",\n  \"permissionIds\": [\"550e8400-e29b-41d4-a716-446655440000\"]\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/create",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "create"]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [],
              "cookie": [],
              "body": "{\n  \"error\": \"Validation failed\",\n  \"message\": \"Já existe uma role com o nome: ADMIN\"\n}"
            }
          ],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 201\", function () {",
                  "    pm.response.to.have.status(201);",
                  "});",
                  "",
                  "pm.test(\"Response is JSON object\", function () {",
                  "    pm.expect(pm.response.json()).to.be.an('object');",
                  "});",
                  "",
                  "pm.test(\"Role has required fields\", function () {",
                  "    const role = pm.response.json();",
                  "    pm.expect(role).to.have.property('id');",
                  "    pm.expect(role).to.have.property('name');",
                  "    pm.expect(role).to.have.property('description');",
                  "    pm.expect(role).to.have.property('active');",
                  "    pm.expect(role).to.have.property('createdAt');",
                  "    pm.expect(role).to.have.property('updatedAt');",
                  "    pm.expect(role).to.have.property('permissionNames');",
                  "});",
                  "",
                  "pm.test(\"ID is valid UUID\", function () {",
                  "    const role = pm.response.json();",
                  "    pm.expect(role.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "});",
                  "",
                  "pm.test(\"Role is active by default\", function () {",
                  "    const role = pm.response.json();",
                  "    pm.expect(role.active).to.be.true;",
                  "});",
                  "",
                  "// Salvar o ID da role criada para testes subsequentes",
                  "if (pm.response.code === 201) {",
                  "    const role = pm.response.json();",
                  "    pm.environment.set(\"role_id\", role.id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "PUT Update Role",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"SENIOR_MANAGER\",\n  \"description\": \"Gerente sênior com acesso expandido\",\n  \"permissionIds\": [\n    \"550e8400-e29b-41d4-a716-446655440000\",\n    \"550e8400-e29b-41d4-a716-446655440001\",\n    \"550e8400-e29b-41d4-a716-446655440002\"\n  ],\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/roles/{{role_id}}",
              "host": ["{{base_url}}"],
              "path": ["roles", "{{role_id}}"]
            },
            "description": "Atualiza uma role existente no sistema. Requer autenticação JWT e permissão role:update."
          },
          "response": [
            {
              "name": "Success - Role atualizada",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"SENIOR_MANAGER\",\n  \"description\": \"Gerente sênior com acesso expandido\",\n  \"permissionIds\": [\n    \"550e8400-e29b-41d4-a716-446655440000\",\n    \"550e8400-e29b-41d4-a716-446655440001\",\n    \"550e8400-e29b-41d4-a716-446655440002\"\n  ],\n  \"active\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/{{role_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "{{role_id}}"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440002\",\n  \"name\": \"SENIOR_MANAGER\",\n  \"description\": \"Gerente sênior com acesso expandido\",\n  \"active\": true,\n  \"createdAt\": \"2024-01-15T10:30:00\",\n  \"updatedAt\": \"2024-01-15T10:35:00\",\n  \"permissionNames\": [\"user:read\", \"user:write\", \"role:create\"]\n}"
            },
            {
              "name": "Error - Role não encontrada",
              "originalRequest": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"SENIOR_MANAGER\",\n  \"description\": \"Gerente sênior com acesso expandido\",\n  \"permissionIds\": [\"550e8400-e29b-41d4-a716-446655440000\"],\n  \"active\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/00000000-0000-0000-0000-000000000000",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "00000000-0000-0000-0000-000000000000"]
                }
              },
              "status": "Bad Request",
              "code": 400,
              "_postman_previewlanguage": "json",
              "header": [],
              "cookie": [],
              "body": "{\n  \"error\": \"Validation failed\",\n  \"message\": \"Role não encontrada com ID: 00000000-0000-0000-0000-000000000000\"\n}"
            }
          ],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is JSON object\", function () {",
                  "    pm.expect(pm.response.json()).to.be.an('object');",
                  "});",
                  "",
                  "pm.test(\"Role has updated data\", function () {",
                  "    const role = pm.response.json();",
                  "    pm.expect(role.name).to.eql(\"SENIOR_MANAGER\");",
                  "    pm.expect(role.description).to.eql(\"Gerente sênior com acesso expandido\");",
                  "    pm.expect(role.active).to.be.true;",
                  "});",
                  "",
                  "pm.test(\"UpdatedAt is newer than CreatedAt\", function () {",
                  "    const role = pm.response.json();",
                  "    const createdAt = new Date(role.createdAt);",
                  "    const updatedAt = new Date(role.updatedAt);",
                  "    pm.expect(updatedAt).to.be.greaterThan(createdAt);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "PATCH Update Role Status",
          "request": {
            "method": "PATCH",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"active\": true\n}"
            },
            "url": {
              "raw": "{{base_url}}/roles/{{role_id}}/status",
              "host": ["{{base_url}}"],
              "path": ["roles", "{{role_id}}", "status"]
            },
            "description": "Altera apenas o status (ativo/inativo) de uma role existente. Requer autenticação JWT e permissão role:update."
          },
          "response": [
            {
              "name": "Success - Status alterado",
              "originalRequest": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"active\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/{{role_id}}/status",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "{{role_id}}", "status"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440002\",\n  \"name\": \"MANAGER\",\n  \"description\": \"Gerente com acesso a relatórios e usuários\",\n  \"active\": true,\n  \"createdAt\": \"2024-01-15T10:30:00\",\n  \"updatedAt\": \"2024-01-15T10:40:00\",\n  \"permissionNames\": [\"user:read\", \"user:write\"]\n}"
            },
            {
              "name": "Success - Status desativado",
              "originalRequest": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"active\": false\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/{{role_id}}/status",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "{{role_id}}", "status"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "{\n  \"id\": \"550e8400-e29b-41d4-a716-446655440002\",\n  \"name\": \"MANAGER\",\n  \"description\": \"Gerente com acesso a relatórios e usuários\",\n  \"active\": false,\n  \"createdAt\": \"2024-01-15T10:30:00\",\n  \"updatedAt\": \"2024-01-15T10:45:00\",\n  \"permissionNames\": [\"user:read\", \"user:write\"]\n}"
            }
          ],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is JSON object\", function () {",
                  "    pm.expect(pm.response.json()).to.be.an('object');",
                  "});",
                  "",
                  "pm.test(\"Role status is updated\", function () {",
                  "    const role = pm.response.json();",
                  "    pm.expect(role).to.have.property('active');",
                  "    // Verificar se o status foi alterado conforme esperado",
                  "});",
                  "",
                  "pm.test(\"Other fields remain unchanged\", function () {",
                  "    const role = pm.response.json();",
                  "    // Verificar se name, description e permissionNames não foram alterados",
                  "    pm.expect(role).to.have.property('name');",
                  "    pm.expect(role).to.have.property('description');",
                  "    pm.expect(role).to.have.property('permissionNames');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "GET All Roles",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/roles",
              "host": ["{{base_url}}"],
              "path": ["roles"]
            },
            "description": "Retorna todas as roles cadastradas no sistema. Requer autenticação JWT e permissão role:read."
          },
          "response": [
            {
              "name": "Success - Lista todas as roles",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/roles",
                  "host": ["{{base_url}}"],
                  "path": ["roles"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"name\": \"ADMIN\",\n    \"description\": \"Administrador do sistema com acesso total\",\n    \"active\": true,\n    \"createdAt\": \"2024-01-15T10:30:00\",\n    \"updatedAt\": \"2024-01-15T10:30:00\",\n    \"permissionNames\": [\"user:read\", \"user:write\", \"role:create\", \"role:update\"]\n  },\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440001\",\n    \"name\": \"USER\",\n    \"description\": \"Usuário comum do sistema\",\n    \"active\": true,\n    \"createdAt\": \"2024-01-15T10:31:00\",\n    \"updatedAt\": \"2024-01-15T10:31:00\",\n    \"permissionNames\": [\"user:read\"]\n  },\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440002\",\n    \"name\": \"MANAGER\",\n    \"description\": \"Gerente com acesso a relatórios e usuários\",\n    \"active\": false,\n    \"createdAt\": \"2024-01-15T10:32:00\",\n    \"updatedAt\": \"2024-01-15T10:45:00\",\n    \"permissionNames\": [\"user:read\", \"user:write\"]\n  }\n]"
            }
          ],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is JSON array\", function () {",
                  "    pm.expect(pm.response.json()).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"Each role has required fields\", function () {",
                  "    const roles = pm.response.json();",
                  "    roles.forEach(role => {",
                  "        pm.expect(role).to.have.property('id');",
                  "        pm.expect(role).to.have.property('name');",
                  "        pm.expect(role).to.have.property('description');",
                  "        pm.expect(role).to.have.property('active');",
                  "        pm.expect(role).to.have.property('createdAt');",
                  "        pm.expect(role).to.have.property('updatedAt');",
                  "        pm.expect(role).to.have.property('permissionNames');",
                  "    });",
                  "});",
                  "",
                  "pm.test(\"ID is valid UUID for each role\", function () {",
                  "    const roles = pm.response.json();",
                  "    roles.forEach(role => {",
                  "        pm.expect(role.id).to.match(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i);",
                  "    });",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "GET Active Roles",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/roles/active",
              "host": ["{{base_url}}"],
              "path": ["roles", "active"]
            },
            "description": "Retorna apenas as roles ativas no sistema. Requer autenticação JWT e permissão role:read."
          },
          "response": [
            {
              "name": "Success - Lista roles ativas",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/roles/active",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "active"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "json",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "application/json"
                }
              ],
              "cookie": [],
              "body": "[\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440000\",\n    \"name\": \"ADMIN\",\n    \"description\": \"Administrador do sistema com acesso total\",\n    \"active\": true,\n    \"createdAt\": \"2024-01-15T10:30:00\",\n    \"updatedAt\": \"2024-01-15T10:30:00\",\n    \"permissionNames\": [\"user:read\", \"user:write\", \"role:create\", \"role:update\"]\n  },\n  {\n    \"id\": \"550e8400-e29b-41d4-a716-446655440001\",\n    \"name\": \"USER\",\n    \"description\": \"Usuário comum do sistema\",\n    \"active\": true,\n    \"createdAt\": \"2024-01-15T10:31:00\",\n    \"updatedAt\": \"2024-01-15T10:31:00\",\n    \"permissionNames\": [\"user:read\"]\n  }\n]"
            }
          ],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is JSON array\", function () {",
                  "    pm.expect(pm.response.json()).to.be.an('array');",
                  "});",
                  "",
                  "pm.test(\"All roles are active\", function () {",
                  "    const roles = pm.response.json();",
                  "    roles.forEach(role => {",
                  "        pm.expect(role.active).to.be.true;",
                  "    });",
                  "});",
                  "",
                  "pm.test(\"Active roles count is less than or equal to total roles\", function () {",
                  "    // Este teste requer que você tenha executado GET All Roles primeiro",
                  "    const activeRoles = pm.response.json();",
                  "    pm.expect(activeRoles.length).to.be.at.least(0);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ],
      "description": "Endpoints para CRUD completo de roles"
    },
    {
      "name": "Public Endpoints",
      "item": [
        {
          "name": "GET Health Check",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/roles/health",
              "host": ["{{base_url}}"],
              "path": ["roles", "health"]
            },
            "description": "Endpoint de health check para verificar se o controller está funcionando. Acesso público, não requer autenticação."
          },
          "response": [
            {
              "name": "Success - Health check",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/roles/health",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "health"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain;charset=UTF-8"
                }
              ],
              "cookie": [],
              "body": "RoleController está funcionando"
            }
          ],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is string\", function () {",
                  "    pm.expect(pm.response.text()).to.be.a('string');",
                  "});",
                  "",
                  "pm.test(\"Response contains expected message\", function () {",
                  "    pm.expect(pm.response.text()).to.include(\"RoleController está funcionando\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        },
        {
          "name": "GET Debug Info",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              },
              {
                "key": "Accept",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/roles/debug",
              "host": ["{{base_url}}"],
              "path": ["roles", "debug"]
            },
            "description": "Endpoint de debug para verificar se o roteamento está funcionando. Acesso público, não requer autenticação."
          },
          "response": [
            {
              "name": "Success - Debug info",
              "originalRequest": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/roles/debug",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "debug"]
                }
              },
              "status": "OK",
              "code": 200,
              "_postman_previewlanguage": "text",
              "header": [
                {
                  "key": "Content-Type",
                  "value": "text/plain;charset=UTF-8"
                }
              ],
              "cookie": [],
              "body": "RoleController - Debug: Roteamento funcionando corretamente"
            }
          ],
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test(\"Status code is 200\", function () {",
                  "    pm.response.to.have.status(200);",
                  "});",
                  "",
                  "pm.test(\"Response is string\", function () {",
                  "    pm.expect(pm.response.text()).to.be.a('string');",
                  "});",
                  "",
                  "pm.test(\"Response contains expected message\", function () {",
                  "    pm.expect(pm.response.text()).to.include(\"RoleController - Debug: Roteamento funcionando corretamente\");",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ]
        }
      ],
      "description": "Endpoints públicos para monitoramento e debug"
    },
    {
      "name": "Test Scenarios",
      "item": [
        {
          "name": "Success Cases",
          "item": [
            {
              "name": "POST Create Role - Success",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"MANAGER\",\n  \"description\": \"Gerente com acesso a relatórios e usuários\",\n  \"permissionIds\": [\n    \"550e8400-e29b-41d4-a716-446655440000\",\n    \"550e8400-e29b-41d4-a716-446655440001\"\n  ]\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/create",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "create"]
                }
              },
              "response": []
            },
            {
              "name": "PUT Update Role - Success",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"SENIOR_MANAGER\",\n  \"description\": \"Gerente sênior com acesso expandido\",\n  \"permissionIds\": [\n    \"550e8400-e29b-41d4-a716-446655440000\",\n    \"550e8400-e29b-41d4-a716-446655440001\",\n    \"550e8400-e29b-41d4-a716-446655440002\"\n  ],\n  \"active\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/{{role_id}}",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "{{role_id}}"]
                }
              },
              "response": []
            },
            {
              "name": "PATCH Update Status - Success",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"active\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/{{role_id}}/status",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "{{role_id}}", "status"]
                }
              },
              "response": []
            },
            {
              "name": "GET All Roles - Success",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/roles",
                  "host": ["{{base_url}}"],
                  "path": ["roles"]
                }
              },
              "response": []
            },
            {
              "name": "GET Active Roles - Success",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/roles/active",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "active"]
                }
              },
              "response": []
            }
          ],
          "description": "Cenários de sucesso para validação"
        },
        {
          "name": "Error Cases",
          "item": [
            {
              "name": "POST Create Role - Invalid Name",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"manager\",\n  \"description\": \"Gerente com acesso a relatórios e usuários\",\n  \"permissionIds\": [\"550e8400-e29b-41d4-a716-446655440000\"]\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/create",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "create"]
                }
              },
              "response": []
            },
            {
              "name": "POST Create Role - Duplicate Name",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"ADMIN\",\n  \"description\": \"Administrador do sistema\",\n  \"permissionIds\": [\"550e8400-e29b-41d4-a716-446655440000\"]\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/create",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "create"]
                }
              },
              "response": []
            },
            {
              "name": "POST Create Role - Invalid Permissions",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"MANAGER\",\n  \"description\": \"Gerente com acesso a relatórios e usuários\",\n  \"permissionIds\": [\n    \"550e8400-e29b-41d4-a716-446655440000\",\n    \"00000000-0000-0000-0000-000000000000\"\n  ]\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/create",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "create"]
                }
              },
              "response": []
            },
            {
              "name": "PUT Update Role - Not Found",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"name\": \"SENIOR_MANAGER\",\n  \"description\": \"Gerente sênior com acesso expandido\",\n  \"permissionIds\": [\"550e8400-e29b-41d4-a716-446655440000\"],\n  \"active\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/00000000-0000-0000-0000-000000000000",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "00000000-0000-0000-0000-000000000000"]
                }
              },
              "response": []
            },
            {
              "name": "PATCH Update Status - Not Found",
              "request": {
                "method": "PATCH",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\n  \"active\": true\n}"
                },
                "url": {
                  "raw": "{{base_url}}/roles/00000000-0000-0000-0000-000000000000/status",
                  "host": ["{{base_url}}"],
                  "path": ["roles", "00000000-0000-0000-0000-000000000000", "status"]
                }
              },
              "response": []
            },
            {
              "name": "GET All Roles - No Token",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/roles",
                  "host": ["{{base_url}}"],
                  "path": ["roles"]
                }
              },
              "response": []
            },
            {
              "name": "GET All Roles - Invalid Token",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token_invalid}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/roles",
                  "host": ["{{base_url}}"],
                  "path": ["roles"]
                }
              },
              "response": []
            },
            {
              "name": "GET All Roles - No Permission",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  },
                  {
                    "key": "Accept",
                    "value": "application/json"
                  },
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token_sem_permissao}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/roles",
                  "host": ["{{base_url}}"],
                  "path": ["roles"]
                }
              },
              "response": []
            }
          ],
          "description": "Cenários de erro para validação"
        }
      ],
      "description": "Cenários de teste organizados por tipo"
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Log da requisição",
          "console.log('Executando requisição:', pm.request.url.toString());",
          "console.log('Headers:', pm.request.headers);"
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "exec": [
          "// Log da resposta",
          "console.log('Status Code:', pm.response.code);",
          "console.log('Response Time:', pm.response.responseTime + 'ms');",
          "console.log('Response Size:', pm.response.responseSize + ' bytes');"
        ]
      }
    }
  ]
}
